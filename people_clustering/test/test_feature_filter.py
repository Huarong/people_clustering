#!/usr/bin/env python
# -*- coding: utf-8 -*-

import unittest

import test_util
from people_clustering.feature_filter import FeatureFilter


class TestFeatureFilter(unittest.TestCase):
    def setUp(self):
        self.ff = FeatureFilter()

    def test_filter(self):
        features = {u'represent': 4, u'consider': 3, u'limited': 1, u'issued': 1, u'relieve': 1, u'focus': 3, u'yellow': 1, u'defendant': 8, u'go': 4, u'follow': 1, u'defraud': 11, u'discern': 1, u'increase': 5, u'violate': 4, u'avoid': 1, u'contravention': 1, u'passage': 1, u'supported': 1, u'cheat': 7, u'foster': 1, u'solicit': 1, u'buyer': 2, u'suffered': 1, u'include': 1, u'sent': 1, u'eliminate': 1, u'merchant': 1, u'confirmation': 1, u'premium': 5, u'risk': 108, u'advantage': 3, u'none': 2, u'unfamiliar': 1, u'choice': 2, u'liability': 16, u'probability': 2, u'balancing': 1, u'underscore': 1, u'fall': 2, u'telling': 2, u'affect': 3, u'concurring': 1, u'disturb': 1, u'accompanying': 1, u'did': 22, u'cause': 2, u'clientele': 2, u'reviewing': 1, u'leave': 1, u'race': 1, u'verdict': 2, u'dealt': 1, u'speculation': 2, u'noted': 1, u'disclaimer': 1, u'concluded': 3, u'prevent': 2, u'occurrence': 1, u'ten': 1, u'core': 1, u'trend': 3, u'injunction': 1, u'prediction': 3, u'jump': 1, u'rate': 2, u'summer': 6, u'scarcity': 1, u'plead': 1, u'functioning': 1, u'investment': 18, u'established': 3, u'appear': 2, u'deliberate': 1, u'investing': 2, u'recommendation': 1, u'brief': 2, u'expressed': 1, u'find': 2, u'above': 1, u'conduct': 11, u'appeal': 5, u'method': 1, u'exercise': 2, u'told': 6, u'satisfy': 1, u'edited': 2, u'deemed': 1, u'degree': 5, u'commercial': 3, u'drew': 1, u'understanding': 3, u'lack': 1, u'corporation': 2, u'asymmetry': 1, u'protection': 1, u'focused': 1, u'excess': 1, u'deceit': 1, u'based': 1, u'[': 5, u'change': 6, u'extreme': 3, u'arena': 1, u'boast': 1, u'receive': 4, u'involved': 5, u'study': 1, u'compliance': 4, u'experience': 1, u'trial': 15, u'amount': 13, u'advertising': 7, u'suggestion': 3, u'exacting': 1, u'action': 10, u'opinion': 11, u'settled': 1, u'DISCUSSION': 1, u'named': 1, u'regardless': 1, u'danger': 1, u'win': 2, u'explained': 5, u'congruence': 1, u'thrust': 1, u'addressed': 1, u'decrease': 1, u'apply': 2, u'total': 1, u'establish': 4, u'kind': 1, u'market': 41, u'use': 4, u'attendance': 1, u'prove': 3, u'distinct': 1, u'beginning': 1, u'predict': 2, u'program': 1, u'call': 1, u'remind': 1, u'vehicle': 1, u'survive': 1, u'type': 4, u'tell': 4, u'today': 2, u'one-for-one': 1, u'sort': 1, u'door': 1, u'comparison': 1, u'\ufffd\ufffd': 1, u'booklet': 2, u'factor': 1, u'heir': 1, u'occurred': 2, u'PUBLISH': 1, u'warn': 3, u'phone': 4, u'commenced': 2, u'controlling': 2, u'broke': 2, u'known': 3, u'iii': 1, u'customer': 28, u'respected': 1, u'account': 8, u'word': 2, u'g': 1, u'err': 1, u'f': 3, u'equation': 1, u'gasoline': 8, u'labeled': 1, u'paragraph': 1, u'era': 1, u'caveat': 2, u'learn': 1, u'making': 1, u'example': 9, u'history': 4, u'control': 1, u'heart': 2, u'stated': 2, u'process': 3, u'heard': 1, u'disbelieve': 1, u'promulgated': 1, u'caution': 1, u'something': 4, u'want': 6, u'allowed': 1, u'sought': 3, u'phrase': 1, u'attract': 5, u'occur': 1, u'absolute': 1, u'information': 11, u'autonomy': 2, u'court': 6, u'hoc': 1, u'provide': 11, u'protect': 1, u'aff': 7, u'utilize': 1, u'significance': 1, u'guarantee': 8, u'construe': 1, u'deviated': 1, u'fraud/deception': 1, u'intended': 2, u'misrepresented': 1, u'act': 1, u'derived': 1, u'misunderstanding': 1, u'abuse': 1, u'finality': 1, u'legality': 1, u'end': 2, u'law': 35, u'revealed': 1, u'response': 1, u'winter': 5, u'purchase': 2, u'organization': 2, u'attempt': 5, u'remember': 1, u'commodity': 21, u'coat': 2, u'acknowledged': 1, u'departure': 1, u'element': 5, u'inform': 1, u'chief': 3, u'restitution': 1, u'deceive': 3, u'enter': 2, u'representation': 4, u'divided': 2, u'greed': 1, u'interpretation': 2, u'reversal': 1, u'correlation': 1, u'developed': 3, u'move': 4, u'vary': 1, u'materiality': 5, u'trade': 10, u'course': 1, u'committed': 4, u'forma': 1, u'monitor': 1, u'winning': 1, u'absence': 1, u'disclosed': 1, u'inquiry': 2, u'alter': 5, u'overcome': 3, u'conveying': 1, u'someone': 1, u'return': 1, u'thereby': 1, u'material': 25, u'fee': 1, u'framework': 1, u'eople': 1, u'half': 1, u'investor': 19, u'day': 2, u'bank': 1, u'enacted': 1, u'hereafter': 1, u'designation': 1, u'preclude': 1, u'level': 2, u'establishing': 1, u'magnitude': 2, u'truth': 1, u'disregard': 1, u'found': 5, u'went': 2, u'stock': 1, u'side': 1, u'mean': 2, u'afforded': 1, u'r': 1, u'storage': 1, u'doctrine': 1, u'ed': 1, u'energy': 1, u'began': 1, u'reduce': 1, u'fostered': 1, u'oil': 28, u'trading': 36, u'yield': 1, u'measure': 1, u'quantum': 1, u'et': 3, u'counteract': 1, u'beyond': 1, u'witness': 3, u'adduced': 1, u'regulatory': 1, u'network': 1, u'profit': 59, u'open': 1, u'novice': 1, u'rev': 1, u'research': 3, u'content': 6, u're': 27, u'contained': 1, u'suggesting': 1, u'formula': 3, u'issue': 2, u'advice': 1, u'disclose': 20, u'None': 1, u'attended': 1, u'theory': 1, u'assured': 1, u'written': 1, u'team': 2, u'story': 1, u'possibility': 4, u'standard': 3, u'difficulty': 4, u'reason': 3, u'base': 2, u'Circuit': 1, u'scienter': 7, u'put': 2, u'supervising': 1, u'obligation': 1, u'wanted': 2, u'likelihood': 9, u'generate': 8, u'care': 3, u'definition': 1, u'training': 3, u'bragged': 1, u'district': 4, u'language': 15, u'created': 1, u'determining': 1, u'impose': 1, u'peppering': 1, u'thing': 2, u'trier': 1, u'place': 4, u'w': 2, u'workbook': 1, u'trumpeting': 1, u'designed': 1, u'prospective': 2, u'render': 3, u'omitted': 3, u'churning': 4, u'number': 5, u'investor-who': 1, u'utilized': 1, u'set': 3, u'message': 7, u'clarity': 2, u'miss': 2, u'instill': 1, u'guess': 1, u'management': 1, u'leverage': 2, u'service': 2, u'script': 10, u'introduction': 2, u'opportunity': 6, u'detailing': 1, u't': 3, u'anyone': 1, u'statement': 24, u'inflate': 1, u'scheme': 1, u'discussion': 4, u'enforcement': 9, u'option': 20, u'relationship': 1, u'explanation': 1, u'took': 1, u'part': 22, u'diminish': 1, u'requisite': 1, u'peculiar': 1, u'wide': 1, u'television': 7, u'b': 9, u'illegality': 2, u'barrier': 1, u'require': 2, u'scrutinize': 1, u'flashed': 1, u'byproduct': 1, u'claim': 16, u'matter': 17, u'future': 6, u'TRADING': 1, u'were': 36, u'briefing': 2, u'outcome': 1, u'bet': 2, u'deciding': 1, u'entail': 1, u'viewer': 2, u'pro': 1, u'pass': 1, u'overstate': 1, u'argument': 5, u'fail': 1, u'say': 2, u'manner': 3, u'have': 14, u'portrait': 1, u'need': 4, u'seminar': 15, u'sell': 3, u'lie': 1, u'misrepresent': 3, u'realm': 1, u'verbatim': 1, u'person': 13, u'studying': 1, u'latter': 1, u'agency': 1, u'reliance': 2, u'explain': 1, u'mix': 1, u'emphasis': 6, u'appellate': 4, u'take': 4, u'analogy': 1, u'finding': 10, u'performance': 1, u'encouraged': 1, u'puffing': 1, u'tool': 1, u'aired': 2, u'added': 4, u'committing': 1, u'track': 6, u'price': 19, u'knew': 1, u'reach': 1, u'chart': 1, u'paid': 1, u'exercised': 1, u'position': 5, u'nothing': 2, u'drought': 2, u']': 4, u'approved': 2, u'statute': 1, u'observation': 1, u'request': 1, u'order': 9, u'principle': 1, u'businessman': 1, u'CONCLUSION': 1, u'filing': 2, u'fact': 21, u'erred': 6, u'precise': 3, u'impression': 4, u'phenomenon': 3, u'show': 2, u'violation': 6, u'text': 1, u'agreed': 1, u'jurisdiction': 2, u'pursuant': 1, u'merit': 1, u'bring': 1, u'session': 1, u'relation': 1, u'risk-option': 1, u'fear': 1, u'fine': 1, u'debate': 1, u'make': 19, u'completion': 1, u'ratio': 1, u'knowledge': 4, u'earned': 2, u'(': 3, u'guidance': 4, u'assertion': 1, u'sugar': 2, u'failed': 5, u'emptor': 2, u'reign': 1, u'compiled': 1, u'essence': 1, u'employee': 1, u'adequate': 2, u'discuss': 1, u'dispute': 2, u'do': 2, u'displayed': 2, u'capital': 6, u'background': 1, u'expectation': 1, u'bear': 1, u'listener': 4, u'made': 6, u'mention': 2, u'timing': 1, u'entity': 2, u'requirement': 1, u'volatility': 1, u'earn': 1, u'held': 1, u'doubled': 1, u'public': 1, u'stuff': 1, u'contrast': 1, u'activity': 1, u'movement': 2, u'\ufffd': 17, u'anticipate': 1, u'view': 2, u'body': 1, u'declared': 1, u'omission': 9, u'mandatory': 2, u'specialist': 1, u'principal': 2, u'violated': 2, u'authorization': 1, u'proclaiming': 1, u'lot': 3, u'grey': 1, u'see': 9, u'defense': 1, u'result': 7, u'operated': 2, u'close': 1, u'concern': 3, u'project': 1, u'said': 4, u'computer': 1, u'COMMODITY': 1, u'pattern': 1, u'review': 6, u'favor': 4, u'state': 2, u'determined': 3, u'approach': 1, u'notice': 4, u'nature': 8, u'screen': 6, u'succeed': 2, u'extent': 4, u'approval': 2, u'come': 1, u'suggested': 1, u'received': 4, u'c': 5, u'instant': 3, u'reverse': 2, u'refinement': 1, u'uncertainty': 1, u'heating': 28, u'contract': 8, u'display': 1, u'assure': 1, u'connection': 5, u'grain': 5, u'context': 3, u'buzz': 1, u'operating': 1, u'otherwise': 1, u'duty': 13, u'relevant': 4, u'tone': 1, u'supply': 3, u'appeared': 2, u'acted': 2, u'period': 1, u'represented': 1, u'exploit': 1, u'reported': 1, u'called': 1, u'applicability': 1, u'news': 1, u'cancel': 3, u'complied': 1, u'speak': 4, u'basis': 2, u'addition': 1, u'create': 3, u'informed': 4, u'cent': 2, u'strategy': 9, u'commission': 4, u'overemphasize': 2, u'interpret': 1, u'interest': 4, u'recognize': 1, u'outweighed': 1, u'entered': 2, u'define': 2, u'firm': 25, u'direction': 2, u'citation': 1, u'controlled': 1, u'painted': 2, u'offered': 1, u'precision': 1, u'scrutiny': 1, u'bulk': 2, u'fund': 1, u'determination': 1, u'demand': 10, u'downplay': 4, u'repetition': 2, u'present': 2, u'case': 32, u'exception': 1, u'fur': 2, u'thirty': 1, u'affirm': 1, u'pungent': 1, u'cash': 6, u'value': 2, u'middle': 1, u'pressed': 1, u'error': 5, u'report': 1, u'situation': 2, u'voice': 1, u'guide': 1, u'discontinuation': 1, u'studied': 1, u'concomitant': 1, u'ripe': 1, u'coupled': 1, u'dissent': 11, u'telephone': 3, u'helped': 1, u'characterize': 1, u'eighteen': 1, u'claimed': 1, u'develop': 1, u'prior': 4, u')': 7, u'remand': 2, u'granted': 2, u'boasted': 1, u'cross': 1, u'adverse': 3, u'speech': 2, u'party': 2, u'reminder': 1, u'document': 1, u'difficult': 1, u'contravene': 2, u'satellite': 1, u'used': 2, u'disagreement': 1, u'assist': 1, u'effect': 2, u'alert': 1, u'running': 1, u'purpose': 6, u'advertisement': 1, u'distinction': 3, u'%': 16, u'insisted': 1, u'judgment': 8, u'safe': 1, u'transaction': 2, u'kept': 1, u'whereby': 1, u'scenario': 1, u'immaterial': 1, u'minimize': 3, u'variety': 1, u'analysis': 2, u'COMMISSION': 1, u'client': 7, u'allow': 1, u'relief': 2, u'personnel': 1, u'entry': 1, u'stating': 1, u'charged': 3, u'advertiser': 1, u'departed': 1, u'money': 24, u'reviewed': 1, u'underlying': 1, u'identify': 1, u'followed': 1, u'majority': 20, u'rose': 1, u'point': 5, u'had': 38, u'entirety': 1, u'bench': 6, u'add': 1, u'potential': 25, u'innocent': 1, u'struck': 2, u'prominent': 2, u'warrant': 1, u'gave': 3, u'ption': 1, u'format': 1, u'read': 1, u'credit': 1, u'unlimited': 2, u'inducement': 1, u'crux': 1, u'know': 6, u'burden': 1, u'supervise': 2, u'judge': 2, u'world': 4, u'execution': 2, u'd': 1, u'loss': 25, u'like': 2, u'success': 7, u'envisioned': 1, u'admitted': 1, u'ignore': 1, u'downplayed': 1, u'designing': 1, u'continue': 1, u'Trading': 2, u'officer': 3, u'lose': 4, u'become': 2, u'page': 1, u'twelve': 1, u'right': 3, u'deal': 2, u'explaining': 1, u'staff': 1, u'Section': 2, u'flagrant': 1, u'phenomena': 1, u'back': 1, u'authority': 2, u'self': 1, u'demeanor': 1, u'sure': 2, u'pricing': 1, u'convey': 2, u'escape': 3, u'advertise': 5, u'confusing': 1, u'provided': 2, u'and/or': 1, u'lead': 2, u'bottom': 2, u'decision': 4, u'leap': 1, u'discretion': 1, u'particularity': 1, u'participation': 1, u'downplaying': 2, u'be': 72, u'business': 8, u'marketing': 1, u'corn': 9, u'broker': 9, u'illustration': 3, u'conveyed': 2, u'inherent': 2, u'sixty': 1, u'brokerage': 18, u'post': 1, u'misrepresentation': 16, u'predictability': 1, u'faith': 1, u'freedom': 1, u'industry': 7, u'discussed': 1, u'o': 1, u'stamp': 1, u'range': 2, u'misleading': 4, u'ensure': 1, u'banker': 1, u'testimony': 2, u'commit': 1, u'disclosure': 33, u'defer': 1, u'lied': 1, u'image': 1, u'year': 1, u'appropriate': 2, u'weather': 10, u'involvement': 1, u'determine': 1, u'ACT': 1, u'drafting': 1, u'invested': 3, u'novo': 1, u'deception': 4, u'area': 2, u'support': 2, u'there': 1, u'question': 2, u'alleged': 3, u'avail': 1, u'lost': 5, u'noting': 1, u'way': 1, u'vacated': 4, u'translate': 2, u'was': 64, u'compensate': 1, u'buy': 6, u'maintenance': 2, u'offering': 2, u'offer': 3, u'attempted': 1, u'regard': 11, u'volume': 1, u'failure': 5, u'line': 1, u'analyst': 2, u'buying': 1, u'count': 1, u'fraud': 25, u'applying': 1, u'understood': 1, u'wish': 1, u'official': 1, u'maximum': 1, u'supplied': 1, u'record': 22, u'frequency': 1, u'limit': 5, u'ruling': 1, u'aversion': 1, u'inquired': 1, u'problem': 2, u'piece': 1, u'agree': 2, u'marketplace': 1, u'flow': 1, u'abstract': 1, u'penny': 1, u'evidence': 3, u'examine': 1, u'warning': 1, u'exist': 3, u'file': 1, u'corresponding': 1, u'encompass': 1, u'worse': 1, u'solicitation': 12, u'contest': 1, u'credibility': 4, u'percent': 7, u'reality': 1, u'power': 3, u'test': 1, u'Chart': 1, u'curiam': 1, u'sufficient': 1, u'realize': 1, u'conclusion': 3, u'picture': 7, u'consisted': 1, u'testified': 3, u'preceding': 1, u'chance': 2, u'ran': 1, u'intent': 1, u'allowing': 1, u'Act': 9, u'structure': 1, u'opened': 1, u'assert': 1, u'inevitability': 1, u'invest': 4, u'required': 1, u'eminar': 1, u'rule': 3, u'recklessness': 3, u'announcer': 1, u'fraudulent': 7, u'urgency': 1, u'time': 6, u'understand': 1, u'precedent': 3, u'proximate': 1}
        large = self.ff.filter(features)
        target = {u'cheat': 7, u'money': 24, u'trade': 10, u'defraud': 11, u'had': 38, u'bench': 6, u'case': 32, u'risk': 108, u'material': 25, u'television': 7, u'liability': 16, u'fraud': 25, u'investor': 19, u'loss': 25, u'success': 7, u'did': 22, u'\ufffd': 17, u'omission': 9, u'see': 9, u'trading': 36, u'result': 7, u'investment': 18, u')': 7, u'record': 22, u'profit': 59, u'content': 6, u're': 27, u'conduct': 11, u'aff': 7, u'disclose': 20, u'be': 72, u'business': 8, u'nature': 8, u'corn': 9, u'court': 6, u'broker': 9, u'scienter': 7, u'brokerage': 18, u'misrepresentation': 16, u'likelihood': 9, u'generate': 8, u'language': 15, u'industry': 7, u'heating': 28, u'contract': 8, u'trial': 15, u'amount': 13, u'advertising': 7, u'action': 10, u'opinion': 11, u'duty': 13, u'disclosure': 33, u'weather': 10, u'message': 7, u'market': 41, u'script': 10, u'strategy': 9, u'statement': 24, u'was': 64, u'defendant': 8, u'firm': 25, u'enforcement': 9, u'option': 20, u'regard': 11, u'part': 22, u'demand': 10, u'customer': 28, u'account': 8, u'b': 9, u'gasoline': 8, u'matter': 17, u'were': 36, u'example': 9, u'claim': 16, u'want': 6, u'dissent': 11, u'have': 14, u'seminar': 15, u'guarantee': 8, u'information': 11, u'%': 16, u'provide': 11, u'make': 19, u'percent': 7, u'majority': 20, u'potential': 25, u'finding': 10, u'picture': 7, u'oil': 28, u'price': 19, u'Act': 9, u'solicitation': 12, u'law': 35, u'judgment': 8, u'commodity': 21, u'person': 13, u'fraudulent': 7, u'client': 7, u'order': 9, u'fact': 21}
        self.assertDictEqual(target, large)


if __name__ == '__main__':
    unittest.main()
